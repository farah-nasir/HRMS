<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title>HRMS</title>
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
        <style>
            body {
                background: #e0e5ec;
                font-family: 'Poppins', sans-serif;
            }

            /* Navbar */
            .navbar-custom {
                background: #e0e5ec;
                box-shadow: 3px 3px 8px #a3b1c6, -3px -3px 8px #ffffff;
                border-radius: 0 0 20px 20px;
            }

            .navbar-custom .navbar-brand,
            .navbar-custom .navbar-text,
            .navbar-custom .btn {
                color: #333;
            }

            h2 {
                color: #333;
                margin-bottom: 20px;
                margin-top: 20px;
                text-align: center;
            }

            .neomorph-table {
                width: 100%;
                border-collapse: separate;
                border-spacing: 0;
                box-shadow:  10px 10px 20px #b8bbc1, 
                            -10px -10px 20px #ffffff;
                border-radius: 20px;
                overflow: hidden;
                background: #e0e5ec;
            }

            .neomorph-table th, .neomorph-table td {
                padding: 15px;
                text-align: left;
            }

            .neomorph-table thead {
                background: #e0e5ec;
                box-shadow: inset 5px 5px 10px #b8bbc1,
                            inset -5px -5px 10px #ffffff;
            }

            .neomorph-table tbody tr {
                transition: all 0.2s ease-in-out;
            }

            .neomorph-table tbody tr:hover {
                background: #d9dee6;
                cursor: pointer;
            }

             .page-wrapper {
                max-width: 1200px;      
                margin: 0 auto;        
            }


            .table-btn {
                padding: 6px 12px;
                border-radius: 12px;
                border: none;
                background: #e0e5ec;
                box-shadow:  5px 5px 10px #b8bbc1,
                            -5px -5px 10px #ffffff;
                cursor: pointer;
                text-decoration: none;
                color: #333;
                font-weight: 500;
                transition: all 0.2s ease-in-out;
            }

            .table-btn:hover {
                box-shadow: inset 3px 3px 6px #b8bbc1,
                            inset -3px -3px 6px #ffffff;
            }

            .add-new-btn {
                display: block;
                width: 200px;
                margin: 0 auto 20px;
                padding: 10px;
                border-radius: 20px;
                text-align: center;
                text-decoration: none;
                color: #333;
                font-weight: bold;
                background: #e0e5ec;
                box-shadow:  5px 5px 10px #b8bbc1,
                            -5px -5px 10px #ffffff;
                transition: all 0.2s ease-in-out;
            }

            .add-new-btn:hover {
                box-shadow: inset 5px 5px 10px #b8bbc1,
                            inset -5px -5px 10px #ffffff;
            }
        </style>
    </head>
    <body>
        <!-- Top Navigation -->
        <nav class="navbar navbar-expand-lg navbar-custom px-5">
            <a class="navbar-brand" href="#">HRMS Dashboard</a>
            <div class="ms-auto d-flex align-items-center">
                <span class="navbar-text me-3" th:text="'Hello, ' + ${username}"></span>
                <a th:href="@{/logout}">
                    <button type="button" class="btn btn-sm btn-danger text-white">Logout</button>
                </a>
            </div>
        </nav>
        <h2>List of Users</h2>
        
        <div class="page-wrapper">
            <div class="btncontainer text-end">
                <a th:href="@{/dashboard}" class="btn-sm btn btn-outline-secondary mb-3">Back</a>
                <a th:href="@{/User/new}" class="btn-sm btn btn-outline-primary mb-3">New User</a>
            </div>
            <table class="neomorph-table">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Username</th>
                         <th>Full Name</th>
                        <th>Role</th>
                        <th>Actions</th>
                    </tr>
                </thead>
                <tbody>
                     <!-- Check if users is empty -->
                    <tr th:if="${#lists.isEmpty(users)}">
                        <td colspan="7" class="text-center">No Record</td>
                    </tr>
                    <tr th:each="user, iterStat : ${users}">
                        <td th:text="${iterStat.index + 1}"></td> <!-- Running number -->
                        <td th:text="${user.username}"></td>
                         <td th:text="${user.fullName}"></td>
                        <td th:text="${user.role.name}"></td>
                        <td>
                            <a th:href="@{/User/edit/{id}(id=${user.id})}" class="btn-sm btn btn-outline-primary mr-2">Edit</a>
                            <a th:href="@{/User/delete/{id}(id=${user.id})}" class="btn-sm btn btn-outline-danger"
                                onclick="return confirm('Are you sure?')">Delete</a>
                        </td>
                    </tr>
                </tbody>
            </table>
            <!-- pagination  -->
            <div class="d-flex justify-content-between align-items-center mt-3">
            <!-- Summary -->
            <div>
                <span th:text="'Showing ' 
                                + ${(currentPage * pageSize) + 1} 
                                + 'â€“' 
                                + ${((currentPage + 1) * pageSize) > totalItems ? totalItems : ((currentPage + 1) * pageSize)} 
                                + ' of ' 
                                + ${totalItems} 
                                + ' records'">
                </span>
            </div>

            <!-- Pagination Bar -->
            <nav aria-label="Page navigation">
                <ul class="pagination mb-0">
                    <!-- Previous Button -->
                    <li class="page-item" th:classappend="${currentPage == 0} ? 'disabled'">
                        <a class="page-link" th:href="@{/User(page=${currentPage - 1}, size=${pageSize})}">Previous</a>
                    </li>

                    <!-- Page Numbers -->
                    <li class="page-item"
                        th:each="i : ${#numbers.sequence(0, totalPages > 0 ? totalPages - 1 : 0)}"
                        th:classappend="${i == currentPage} ? 'active'">
                        <a class="page-link" 
                        th:text="${i + 1}" 
                        th:href="@{/User(page=${i}, size=${pageSize})}"></a>
                    </li>

                    <!-- Next Button -->
                    <li class="page-item" th:classappend="${currentPage + 1 >= (totalPages > 0 ? totalPages : 1)} ? 'disabled'">
                        <a class="page-link" th:href="@{/User(page=${currentPage + 1}, size=${pageSize})}">Next</a>
                    </li>
                </ul>
            </nav>
            </div>
        </div>
    </body>   
</html>
